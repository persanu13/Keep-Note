(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function c(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=c(r);fetch(r.href,s)}})();(async function(){const p=["goldenrod","darkslategrey","crimson","#153448","#FDA403","coral","midnightblue"],d="http://localhost:3000/notes",c=(await r(d)).reverse();let l=null;u(c);async function r(t){let e;try{e=await(await fetch(t)).json()}catch(n){console.error("Error:",n);return}return e}async function s(t,e){let n;try{n=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(o){console.error("Error:",o);return}return n}async function f(t,e){let n;try{n=await(await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(o){console.error("Error:",o);return}return n}async function b(t){let e;try{e=await(await fetch(t,{method:"Delete",headers:{"Content-Type":"application/json"}})).json()}catch(n){console.error("Error:",n);return}return e}document.querySelector("body").addEventListener("click",C);function C(t){if(l!=null){if(t.target.closest("[data-color-picker]"))return;l.remove(),l=null}}document.querySelector("[data-search-bar]").addEventListener("input",x);function x(t){const e=t.target.value,n=c.filter(o=>o.title.toLowerCase().includes(e.toLowerCase()));u(n)}document.querySelector("[data-search-bar]").addEventListener("click",E);function E(t){if(!t.target.closest("[data-clear]"))return;const n=document.querySelector("[data-search-bar] input");n.value="",n.focus(),u(c)}document.querySelector("[data-add-note]").addEventListener("click",v);async function v(t){let e={title:"New Note",note:"",color:w(),fixed:"false"};const n=await s(e,d);c.unshift(n),u(c);const o=document.querySelector(`[data-note-id="${n.id}"] input`);o.focus(),o.select()}function w(){return p[Math.ceil(Math.random()*p.length)-1]}document.querySelector("[data-notes-container]").addEventListener("input",L);function L(t){const e=t.target.closest("[data-note-id]");t.target.closest("textarea")&&(t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px"),t.target.closest("[data-color-picker]")&&(e.style.backgroundColor=t.target.closest("[data-color-picker]").value),h(e)}async function h(t,e,n,o,a){const i=t.dataset.noteId;e||(e=t.querySelector("input").value),n||(n=t.querySelector("textarea").value),o||(o=t.style.backgroundColor),a||(a=t.dataset.fixed);const m=await f({title:e,note:n,color:o,fixed:a},d+"/"+i),B=c.findIndex(I=>I.id===i);c.splice(B,1,m)}document.querySelector("[data-notes-container]").addEventListener("click",N);function N(t){const e=t.target.closest("[data-note-button]");if(!e)return;const n=e.dataset.noteButton;switch(n){case"delete":k(e.closest("[data-note-id]").dataset.noteId);break;case"palete":S(e.closest("[data-note-id]"));break;case"fixed":O(e.closest("[data-note-id]"));break;case"color":q(e.closest("[data-note-id]"),e);break;default:console.log(`The "${n}" action is not implemented!`)}}async function k(t){await b(d+"/"+t);const e=c.findIndex(n=>n.id===t);c.splice(e,1),u(c)}function S(t){l===null&&setTimeout(()=>{l=T(),t.append(l)},0)}async function O(t){let e="false";t.dataset.fixed!="true"&&(e="true"),await h(t,null,null,null,e),u(c)}function T(){const t=document.createElement("div");t.classList.add("colors-container");for(let n of p){let o=document.createElement("button");o.type="button",o.style.backgroundColor=n,o.dataset.noteButton="color",t.append(o)}const e=document.createElement("input");return e.type="color",e.dataset.colorPicker="",t.append(e),t}function q(t,e){t.style.backgroundColor=e.style.backgroundColor,h(t,null,null,e.style.backgroundColor)}function P(t){const e=document.createDocumentFragment(),n=document.createElement("div");n.classList.add("grid-container");const o=document.createElement("div");o.classList.add("grid-container");for(const a of t){const i=j(a);i.dataset.fixed=="false"?o.append(i):n.append(i)}if(n.children.length>0){const a=document.createElement("p");a.textContent="Fixed notes",e.append(a)}if(e.append(n),o.children.length>0){const a=document.createElement("p");a.textContent="Other notes",e.append(a)}return e.append(o),e}function j(t){const e=document.createElement("div");e.dataset.noteId=t.id,e.dataset.fixed=t.fixed,e.classList.add("note-card"),e.style.backgroundColor=t.color;const n=document.createElement("input");n.type="text",n.value=t.title,n.placeholder="Title",n.maxLength=30;const o=document.createElement("textarea");o.value=t.note,o.placeholder="Note",setTimeout(function(){o.style.height=o.scrollHeight+"px"},0);const a=document.createElement("div"),i=y("fa-solid fa-trash-can");i.dataset.noteButton="delete";const g=y("fa-solid fa-palette");g.dataset.noteButton="palete";const m=y("fa-solid fa-thumbtack");return m.dataset.noteButton="fixed",a.append(i,g,m),e.append(n,o,a),e}function y(t){const e=document.createElement("button");e.type="button";const n=document.createElement("i");for(let o of t.split(" "))n.classList.add(o);return e.append(n),e}function u(t){const e=P(t),n=document.querySelector("[data-notes-container]");n.innerHTML="",n.append(e)}})();
